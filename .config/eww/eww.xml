<!-- The main eww configuration file. This is where your widgets and how they appear on the screen and what they
contain are defined. -->

<eww>
  <definitions>
<!--Music-->
  <!--Side_bar-->
  <def name="eww-window">
    <box class="window-title" orientation="h" space-evenly="true">
      <box class="titlebar"> ━━━━━━  ❖  ━━━━━━ </box>
    </box>
  </def>
        <def name="profile">
            <box class="profile" orientation="v" space-evenly="true">
                <box orientation="h">
                    <box class="pfp"></box>
                </box>
                <box orientation="v">
                    <box class="username">logged in as</box>
                    <box class="realname">thepenguin</box>
                </box>
            </box>
        </def>
        <def name="player">
            <box orientation="h" space-evenly="true">
                <box class="song-art" style="background-image: url('{{art}}');">{{song_art}}</box>
                <box class="song-data" orientation="v" space-evenly="false">
                    <box class="song-title">{{song_title}}</box>
                    <box class="player-btn" orientation="h" halign="center">
                        <button onclick="playerctl previous"></button> 
                        <button class="pause-play" onclick="playerctl play-pause">{{player_status}}</button>
                        <button onclick="playerctl next"></button>
                    </box>
                </box>
            </box>
        </def>
        <def name="system-info">
            <box class="system-info" orientation="v" space-evenly="false">
                <box class="ram-bar" orientation="h">
                    <box class="label-ram-bar">RAM</box>
                    <scale min="0" max="101" active="false" value="{{used_ram}}"></scale>
                </box>
                <box class="brightness-bar" orientation="h">
                    <box class="label-brightness-bar">BRI</box>
                    <scale min="0" max="101" active="false" value="{{brightness}}"></scale>
                </box>
                <box class="vol-bar" orientation="h">
                    <box class="label-vol-bar">VOL</box>
                    <scale min="0" max="101" active="false" value="{{volume}}"></scale>
                </box>
            </box>
        </def>
        <def name="powermenu">
            <box orientation="h" space-evenly="true"> 
                <box class="powermenu-btn" halign="center" space-evenly="false">
                    <button class="lock-btn" onclick="betterlockscreen -l dimblur"></button>
                    <button class="logout-btn" onclick="bspc quit"></button>
                    <button class="shutdown-btn" onclick="systemctl poweroff"></button> 
                </box>
            </box>
        </def>

  <!--Calendar-->
    <def name="calendar-dark">
        <box class="main" orientation="h" space-evenly="false">
            <box class="calendar-dark" orientation="v" space-evenly="false">
                <label class="calendar-year-dark" text="{{year_cal}}" halign="start"/>
                <label class="calendar-date" text="{{weekday_cal}}, {{month_cal}} {{day_num_cal}}" halign="start"/>
                <calendar show-day-names="true" show-heading="true" halign="start" valign="center" onclick="~/.config/eww/scripts/calendar.sh {}"/>
            </box>
            <box class="calendar-info" orientation="v" space-evenly="false" halign="start" valign="center" hexpand="false">
                <box class="quote-container" orientation="v" hexpand="false" vexpand="false">
                    <label class="quote" halign="start" text="{{quote-text}}" wrap="true" width="10"/>
                    <box orientation="v">
                        <box class="quote-info" orientation="h" space-evenly="false">
                            <label class="quote-author-dark" text="- {{quote-author}} "/>
                            <label class="quote-title-dark" text="({{quote-title}})"/>
                        </box>
                        <box orientation="v" space-evenly="false" valign="center">
                            <label class="quote-number-dark" text="#{{quote-number}}" halign="end"/>
                            <label class="quote-time-dark" text="{{quote-time}} min until new quote" halign="end"/>
                        </box>
                    </box>
                </box>
                <box class="calendar-container-light" orientation="v" space-evenly="false">
                    <expander name="Appointments" vexpand="true" expanded="false">
                        <box orientation="h" space-evenly="false">
                            <label class="app-times" text="{{appointment_times}}"/>
                            <label class="app-names" text="{{appointment_names}}"/>
                        </box>
                    </expander>
                </box>
            </box>
        </box>
    </def>
  </definitions>  

  <variables>
    <!--Music-->
    <script-var name="musicstat" interval="1s">~/.config/eww/scripts/all_sys P_P</script-var>
    <script-var name="artist" interval="1s">playerctl metadata --format '{{ artist }}' | sed 's/\(.\{40\}\).*/\1.../'</script-var>
    <script-var name="title" interval="1s">playerctl metadata --format '{{ title }}' | sed 's/\(.\{40\}\).*/\1.../'</script-var>
    <!--Power-->
    <script-var name="User" interval="1s">echo "$USER"</script-var>
    <!-- DATE VARS -->

    <!-- PLAYER VARS -->
    <script-var name="art" interval="1s">~/.config/eww/scripts/echoSongArt</script-var>
    <script-var name="song_art" interval="1s">~/.config/eww/scripts/getSongArt</script-var>
    <script-var name="song_title" interval="1s">~/.config/eww/scripts/getSongTitle</script-var>
    <script-var name="player_status" interval="1s">~/.config/eww/scripts/getPlayerStatus</script-var>

    <!-- SYSTEM INFO VAR -->
    <script-var name="used_ram" interval="2s">~/.config/eww/scripts/getUsedRam</script-var>
    <script-var name="volume" interval="1s">~/.config/eww/scripts/getVolume</script-var>
    <script-var name="brightness" interval="1s">~/.config/eww/scripts/getBrightness</script-var>
  </variables>

  <windows> 
    <!--Music-->
     <window name="play">
          <geometry x="1611" y="39" width="300" height="50"/>
          <widget>
              <box class="main_box" orientation="v" space-evenly="false">
                <Player/>
              </box> 
          </widget>
      </window>

    <!--calendar-->
		<window name="calendar">
			<geometry anchor="top center" x="0px" y="39px" width="200px" height="250px"/>
			<widget><calendar-dark/></widget>
        </window>

    <!--Side_bar-->
    <window name="eww-window">
            <geometry x="9px" y="39px" width="373px" height="600px"/>
            <widget>
                <eww-window/>
            </widget>
        </window>
        <window name="profile">
            <geometry x="25px" y="89px" width="336px" height="120px"/>
            <widget>
                <profile/>
            </widget>
        </window>
        <window name="player">
            <geometry x="25px" y="234px" width="336px" height="110px"/>
            <widget>
                <player/>
            </widget>
        </window>
        <window name="system-info">
            <geometry x="25px" y="374px" width="336px" height="170px"/>
            <widget>
                <system-info/>
            </widget>
        </window>
        <window name="powermenu">
            <geometry x="25px" y="499px" width="336px" height="120px"/>
            <widget>
                <powermenu/>
            </widget>
        </window>
  </windows>
</eww>
 
